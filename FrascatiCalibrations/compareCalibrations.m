close all;
%%
calTimeStamps = {...
%     '20141203_2131',...
%     '20141204_1051',...
%     '20141204_1428',...
%     '20141205_0944',...
%     '20141210_1642',...
%     '20141210_1830',...
%     '20141210_1844',...
%     '20141211_1007',...
%     '20141215_1104',...
%     '20141215_1303',...
%     '20141215_1405',...
%     '20141216_1541',...
%     '20150420_1831',...
%     '20150421_0936',...
%     '20150421_1142',...
%     '20150421_1349',...
%     '20150421_1520',...
%     '20150421_1629',...
%     '20150421_1716',...
%     '20150421_1719',...
%     '20150422_0917',...
%     '20150422_1004',...
%     '20150422_1140',...
%     '20150422_1157',...
%     '20150422_1357',...
%     '20150422_1541',...
%     '20150422_1812',...
%     '20150423_1047',...
%     '20150423_1050',...
%     '20150423_1211',...
%     '20150423_1534',...
%     '20150423_1805',...
%     '20150424_1504',...
%     '20150428_1124',...
%     '20150428_1708',...
%     '20150429_1004',...
%     '20150429_1153_MechanicalShifterOnMixer1_Calibration',...
%     '20150429_1205_MechanicalShifterOnMixer2_Calibration',...
%     '20150429_1803',...
%     '20150429_1922',...
%     '20150430_0947',...
%     '20150430_1654',...
%     '20150430_1722_CalibrationMon1Mix1FONT_Mon2Mix3_Mon3Mix2',...
%     '20150430_1731_CalibrationMon1Mix1FONT_Mon2Mix3_Mon3Mix2_2Mechanical',...
%     '20150702_0909',...
%     '20150702_0929',...
%     '20150702_1124',...
%     '20150703_1519',...
%     '20150707_1018',...
%     '20150707_1036',...
%     '20150714_1650',...
%     '20150714_1701',...
%     '20150714_1717',...
%     '20150716_1632',...
%     '20150716_1650',...
%     '20150731_1708',...
%     '20151001_1504',...
%     '20151001_1517',...
%     '20151008_1530',...
%     '20151009_1049',...
%     '20151029_1805',...
%     '20151029_1834',...
%     '20151029_1848',...
%     '20151029_1907',...
%     '20151029_1924',...
%     '20151030_2154',...
%     '20151106_1114',...
%     '20151106_1332',...
    '20151112_1852',...
    '20151116_1142',...
    '20151116_1334',...
    '20151116_1651',...
    '20151117_1151',...
    '20151120_1054',...
    '20151120_1345',...
...%     '20151202_1318',...
...%     '20151202_1735',...
    '20151207_1036',...
    '20151207_1233',...
    '20151216_1056',...
    '20151216_1140',...
    '20151216_1337'...
};

nCals = length(calTimeStamps);
nMons = 3;
calDateNum = NaN(nCals,1);
calConstants = NaN(nCals,nMons,4);
useDiode = NaN(nCals,1);
for i=1:nCals
    calDir = ['/home/jack/PhaseFeedforward/CTFData/' calTimeStamps{i}(1:6) '/FrascatiCalibrations'];
    [calConstants(i,:,:), useDiode(i)] = loadFrascatiCalibrationConstants(sprintf([calDir '/frascatiCalibrationConstants_' calTimeStamps{i}]));
    calYear = str2double(calTimeStamps{i}(1:4));
    calMonth = str2double(calTimeStamps{i}(5:6));
    calDay = str2double(calTimeStamps{i}(7:8));
    calHour = str2double(calTimeStamps{i}(10:11));
    calMin = str2double(calTimeStamps{i}(12:13));
    calDateNum(i) = datenum(calYear,calMonth,calDay,calHour,calMin,0);
end
useDiode = boolean(useDiode);
calAmp = abs(calConstants(:,:,1));
calOff = calConstants(:,:,4);

% calAmp(calAmp<0.25) = NaN;
% calAmp(useDiode,:) = NaN;

figure;
plot(calDateNum,calAmp,'o')
datetick('x','dd mmm')

figure;
plot(calDateNum,squeeze(calConstants(:,:,4)),'o')

figure;
plot(calDateNum,useDiode,'o');